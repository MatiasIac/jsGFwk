!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("jsGFwk",[],t):"object"==typeof exports?exports.jsGFwk=t():e.jsGFwk=t()}(self,(function(){return(()=>{"use strict";var e={d:(t,s)=>{for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{Animator2D:()=>i,Clock:()=>a,Collisions:()=>r,Container:()=>p,Containers:()=>v,Engine:()=>s,Fonts:()=>w,GameObject:()=>n,ImageFilters:()=>b,ImageManipulation:()=>O,Jukebox:()=>m,KeyboardIO:()=>u,MouseIO:()=>d,ResourcesManager:()=>h,Scene:()=>f,ScenesManager:()=>C,SpriteCollection:()=>l,Sprites:()=>c,TouchIO:()=>_,VisualGameObject:()=>o,WebStorage:()=>g});class s{_gameObjects={};_includes=[];settings={width:640,height:480,canvas:"canvas",frameRate:1e3/33,clearColor:"rgb(0,0,0)"};constructor(){}_destroyObject(e){delete this._gameObjects[e]}createObject(e){if(e.id=e.id||crypto.randomUUID(),void 0!==e.name){e.destroy=this._destroyObject.bind(this,e.name),this._gameObjects[e.name]=e;for(var t=0;t<this._includes.length;t++)void 0!==this._includes[t].onObjectCreated&&this._includes[t].onObjectCreated(this._gameObjects[e.name]);void 0!==e.init&&e.init()}}sort(){let e=[];for(let t in this._gameObjects)e.push(this._gameObjects[t]);e.sort(((e,t)=>e.zOrder-t.zOrder));for(let t=0;t<e.length;t++)delete this._gameObjects[e[t].name],this._gameObjects[e[t].name]=e[t]}include(e){for(let t=0;t<this._includes.length;t++)if(e._name===this._includes[t]._name)return;this._includes[this._includes.length]=e,e._gfwk=this}start(){for(let e=0;e<this._includes.length;e++)void 0!==this._includes[e].onStart&&this._includes[e].onStart()}stop(){for(let e=0;e<this._includes.length;e++)void 0!==this._includes[e].onStop&&this._includes[e].onStop()}}class i{_name="Animator2D";_2Dcontext={};_canvas={};_2Dbuffer={};_bufferCanvas={};_lastFrame=0;constructor(){}_pointer(){const e=(new Date).getTime(),t=(e-this._lastFrame)/1e3;this._lastFrame=e,this._2Dbuffer.save(),this._2Dbuffer.fillStyle=this._gfwk.settings.clearColor,this._2Dbuffer.fillRect(0,0,this._canvas.width,this._canvas.height),this._2Dbuffer.restore();for(let e in this._gfwk._gameObjects)if(null!==this._gfwk._gameObjects[e]){const s=this._gfwk._gameObjects[e];void 0!==s&&s.update&&s.update(t),void 0!==s&&s.draw&&s.isVisible&&(this._2Dbuffer.save(),s.draw(this._2Dbuffer),this._2Dbuffer.restore())}for(let e=0;e<this._gfwk._includes.length;e++)void 0!==this._gfwk._includes[e].onPreRender&&(this._gfwk._2Dbuffer.save(),this._gfwk._includes[e].onPreRender(this._2Dbuffer),this._2Dbuffer.restore());for(let e in this._gfwk._gameObjects)this._2Dbuffer.save(),void 0!==this._gfwk._gameObjects[e].postRender&&this._gfwk._gameObjects[e].postRender(this._2Dbuffer),this._2Dbuffer.restore();this._2Dcontext.drawImage(this._bufferCanvas,0,0),requestAnimFrame(this._pointer.bind(this))}onStart(){this._canvas=document.getElementById(this._gfwk.settings.canvas),this._2Dcontext=this._canvas.getContext("2d"),this._bufferCanvas=document.createElement("canvas"),this._bufferCanvas.width=this._canvas.width,this._bufferCanvas.height=this._canvas.height,this._2Dbuffer=this._bufferCanvas.getContext("2d"),window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,_gfwk.settings.frameRate)},requestAnimFrame(this._pointer.bind(this))}}class n{name=crypto.randomUUID();zOrder=0;isVisible=!1;constructor(){}init(){}update(e){console.log(`Dummy game object ${this.name}`)}}class o extends n{x=0;y=0;width=0;height=0;isVisible=!0;constructor(e,t,s,i,n,o,a){super(),super.name=e,super.zOrder=o||0,this.isVisible=a||!0,this.x=t||this.x,this.y=s||this.y,this.width=i||this.width,this.height=n||this.height}draw(e){}}class a{_name="Clock";_counter=0;triggerTime=0;_action={};constructor(e){void 0!==e&&(this.setAction(e.action||this._action),this.triggerTime=e.triggerTime||this.triggerTime)}reset(){this._counter=0}setAction(e){this._action=e}tick(e){this._counter+=e,this._counter>=this.triggerTime&&(this._counter=0,this._action())}}class r{_name="Collisions";static RECTANGLE_COLLISION_MODE="RECTANGLE";static RADIUS_DISTANCE_COLLISION_MODE="RADIUS_DISTANCE";constructor(){}_rectangleCollisionChecker(e){if(!e)return!1;if(null==this.width||null==this.height||null==this.x||null==this.y)return!1;if(null==e.width||null==e.height||null==e.x||null==e.y)return!1;this.rotationPoint||(this.rotationPoint={x:0,y:0}),e.rotationPoint||(e.rotationPoint={x:0,y:0});var t=this.x-this.rotationPoint.x,s=this.y-this.rotationPoint.y,i=e.x-e.rotationPoint.x,n=e.y-e.rotationPoint.y;return!(t+this.width<i||s+this.height<n||t>i+e.width||s>n+e.height)}_circleCollisionChecker(e){if(!e)return!1;if(!(this.radius&&this.x&&this.y&&this.center))return!1;if(!e.radius||!e.x||!e.y)return!1;var t=e.x+e.center.x-(this.x+this.center.x),s=e.y+e.center.y-(this.y+this.center.y);return Math.sqrt(t*t+s*s)<this.radius+e.radius}areCollidingBy(e,t,s){switch(s){case r.RECTANGLE_COLLISION_MODE:return this._rectangleCollisionChecker.call(e,t);case r.RADIUS_DISTANCE_COLLISION_MODE:return this._circleCollisionChecker.call(e,t);default:return!1}}onStart(){}onObjectCreated(e){e.width=e.width||1,e.height=e.height||1,e.radius=e.radius||1,e.center=e.center||{x:0,y:0},e.isRectColliding=this._rectangleCollisionChecker,e.isRadColliding=this._circleCollisionChecker}}class h{_name="ResourcesManager";_totalResources=0;_loadedResources=0;PERCENTAGE_LOADED=0;static SOUND_FORMATS={OGG:'audio/ogg; codecs="vorbis"',WAVE:'audio/wav; codecs="1"',MP3:"audio/mpeg;",AAC:'audio/mp4; codecs="mp4a.40.2"'};SOUNDS={};GRAPHICS={};constructor(){}_loadDispatcher(e){this._loadedResources++,this.PERCENTAGE_LOADED=100*this._loadedResources/this._totalResources,this._loadedResources==this._totalResources?(this._detachEvents(),this.onResourcesLoadedCompleted()):this.onResourceLoaded(e)}_detachEvents(){for(let e in this.SOUNDS)this.SOUNDS.hasOwnProperty(e)&&"FORMAT"!==e&&"isMuted"!==e&&"mute"!==e&&"unMute"!==e&&"doMute"!==e&&(this.SOUNDS[e]._volume=0,this.SOUNDS[e].audio.removeEventListener("canplaythrough",this._loadDispatcher))}addGraphic(e){const t=new Image;t.onload=this._loadDispatcher.bind(this,t),e.image=t,this.GRAPHICS[e.name]=e,this._totalResources++}addSound(e){const t=new Audio;let s=!1;if(null!=e.sources)for(let i in h.SOUND_FORMATS)if(t.canPlayType&&t.canPlayType(h.SOUND_FORMATS[i]).replace(/no/,"")){if(null==e.sources[h.SOUND_FORMATS[i]]){s=!0;break}e.source=e.sources[h.SOUND_FORMATS[i]].source;break}s||(t.addEventListener("canplaythrough",this._loadDispatcher.bind(this,t),!1),e.audio=t,this.SOUNDS[e.name]=e,this._totalResources++)}onResourcesLoadedCompleted(){}onResourceLoaded(){}onStart(){const e=this;setTimeout((function(){for(let t in e.GRAPHICS)e.GRAPHICS.hasOwnProperty(t)&&(e.GRAPHICS[t].image.src=e.GRAPHICS[t].source);for(let t in e.SOUNDS)e.SOUNDS.hasOwnProperty(t)&&"FORMAT"!==t&&"isMuted"!==t&&"mute"!==t&&"unMute"!==t&&"doMute"!==t&&(e.SOUNDS[t].audio.src=e.SOUNDS[t].source)}),2e3)}}class l{_isLooping=!1;sprites=[];seeker=-1;sprite={};constructor(){}_looper(){this.seeker++,this.seeker=this.seeker%this.sprites.length}_oneWay(){this.seeker<this.sprites.length&&this.seeker++}_moveFrame(){}loop(e){this._moveFrame=e?this._looper:this._oneWay,this._isLooping=e}moveNextSprite(){this._moveFrame(),this.sprite=this.sprites[this.seeker]}reset(){this.seeker=-1,this.moveNextSprite()}clone(){const e=new l;for(let t=0;t<this.sprites.length;t++){let s=new Image;s.src=self.sprites[t].image.src,e.sprites.push({height:this.sprites[t].height,image:s,inverted:this.sprites[t].inverted,left:this.sprites[t].left,top:this.sprites[t].top,width:this.sprites[t].width})}return e.loop(this._isLooping),e}}class c{_name="Sprites";SPRITES_BAG={};constructor(){}static _genSprite(e,t){const s=document.createElement("canvas"),i=s.getContext("2d");return s.width=e.width,s.height=e.height,e.inverted&&(i.translate(spriteObject.width,0),i.scale(-1,1)),i.drawImage(e.graphic,e.left,e.top,e.width,e.height,0,0,e.width,e.height),void 0!==t&&t(i,e),s.toDataURL()}static createCropSequence(e,t,s){let i=[];for(let n=0;n<t;n++)i.push({left:e.left+n*e.width,top:e.top,width:e.width,height:e.height,inverted:void 0!==s&&s});return i}createCollection(e,t,s,i){this.SPRITES_BAG[e]=new l;for(let n=0;n<s.length;n++){let o={top:s[n].top,left:s[n].left,width:s[n].width,height:s[n].height,graphic:t,inverted:s[n].inverted||!1},a=new Image;a.src=c._genSprite(o,i),o.image=a,delete o.graphic,this.SPRITES_BAG[e].sprites[n]=o,this.SPRITES_BAG[e].loop(!1)}}create(e,t){const s=new Image;this.SPRITES_BAG[e.id]={top:e.top,left:e.left,width:e.width,height:e.height,graphic:s},s.src=c._genSprite(e,t)}}class u{_name="KeyboardIO";_keyboardCallers=[];_activeKey=[];static KEYS={A:65,D:68,I:73,J:74,K:75,L:76,N:78,S:83,W:87,M:77,N:78,C:67,ONE:49,TWO:50,THREE:51,SHIFT:16,SPACEBAR:32,ENTER:13,CONTROL:17};constructor(){}_stopPropagation(){}_keyReleased(e){delete this._activeKey[e.which]}_keyPressed(e){this._stopPropagation(e);for(let t=0;t<this._keyboardCallers.length;this._keyboardCallers[t++](e.which));this._activeKey[e.which]=!0}eventPropagation(e){this._stopPropagation=e?function(){}:function(e){e.preventDefault()}}getActiveKeys(){return this._activeKey}registerKeypress(e){return this._keyboardCallers.push(e),this._keyboardCallers.length-1}unregisterKeypress(e){this._keyboardCallers.splice(e,1)}onStart(){const e=this;document.addEventListener("keydown",(function(t){e._keyPressed(t)}),!1),document.addEventListener("keyup",(function(t){e._keyReleased(t)}),!1)}}class d{_name="MouseIO";_mouseClickCounter=0;_mouseClickCallers={};_mouseMoveCallers=[];_mouseDownCounter=0;_mouseDownCallers={};_mouseWhellCallers=[];_lastDownCoords={};_lastMoveCoords={};_isMousePressed=!1;constructor(){}_getCoordinates(e){const t=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail)),s=e.wheelDelta||-e.detail;return e.offsetX?{x:e.offsetX,y:e.offsetY,wheel:{normalized:t,delta:s}}:e.layerX?{x:e.layerX,y:e.layerY,wheel:{normalized:t,delta:s}}:{x:e.pageX-this._canvas.offsetLeft,y:e.pageY-this._canvas.offsetTop,wheel:{normalized:t,delta:s}}}_mouseDown(e){this._isMousePressed=!0,this._lastDownCoords=this._getCoordinates(e);for(let e in this._mouseDownCallers)this._mouseDownCallers.hasOwnProperty(e)&&this._mouseDownCallers[e](this._lastDownCoords)}_mouseUp(){this._isMousePressed=!1;for(let e in this._mouseClickCallers)this._mouseClickCallers.hasOwnProperty(e)&&this._mouseClickCallers[e](this._lastDownCoords)}_mouseMove(e){this._lastMoveCoords=this._getCoordinates(e);for(var t=0;t<this._mouseMoveCallers.length;this._mouseMoveCallers[t++](this._lastMoveCoords));}_mouseWheel(e){this._lastMoveCoords=this._getCoordinates(e);for(var t=0;t<this._mouseWhellCallers.length;this._mouseWhellCallers[t++](this._lastMoveCoords));}registerClick(e){return this._mouseClickCallers[this._mouseClickCounter]=e,this._mouseClickCounter++,this._mouseClickCounter-1}registerMove(e){return this._mouseMoveCallers.push(e),this._mouseMoveCallers.length-1}registerDown(e){return this._mouseDownCallers[this._mouseDownCounter]=e,this._mouseDownCounter++,this._mouseDownCounter-1}registerWheel(e){return this._mouseWhellCallers.push(e),this._mouseWhellCallers.length-1}unregisterClick(e){delete this._mouseClickCallers[e]}unregisterMove(e){this._mouseMoveCallers.splice(e,1)}unregisterDown(e){delete this._mouseDownCallers[e]}unregisterWheel(e){this._mouseWhellCallers.splice(e,1)}onStart(){const e=this;this._canvas=document.getElementById(this._gfwk.settings.canvas),document.getElementById(this._gfwk.settings.canvas).addEventListener("mousedown",(function(t){e._mouseDown(t)}),!1),document.getElementById(this._gfwk.settings.canvas).addEventListener("mouseup",(function(t){e._mouseUp(t)}),!1),document.getElementById(this._gfwk.settings.canvas).addEventListener("mousemove",(function(t){e._mouseMove(t)}),!1),document.getElementById(this._gfwk.settings.canvas).addEventListener("mousewheel",(function(t){e._mouseWheel(t)}),!1),document.getElementById(this._gfwk.settings.canvas).addEventListener("DOMMouseScroll",(function(t){e._mouseWheel(t)}),!1)}}class _{_name="TouchIO";_touchCounter=0;_touchCallers={};constructor(){}_getCoordinates(e){return{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}}_touchEnd(e){const t=this._getCoordinates(e);for(let e in this._touchCallers)this._touchCallers.hasOwnProperty(e)&&this._touchCallers[e](t)}registerTouch(e){return this._touchCallers[this._touchCounter]=e,this._touchCounter++,this._touchCounter-1}unregisterTouch(e){delete this._touchCallers[e]}onStart(){const e=this;document.getElementById(this._gfwk.settings.canvas).addEventListener("touchend",(function(t){e._touchEnd(t)}),!1)}}class g{_name="WebStorage";_isAvailable=!1;static STORAGE_TYPES={JSON:"JSON"};constructor(){this._isAvailable="undefined"!=typeof Storage,this._isAvailable||console.warn("Storage is not available.")}setData(e,t,s){let i=null;g.STORAGE_TYPES.JSON,i=JSON.stringify(e),localStorage.setItem(t,i)}getData(e){return localStorage[e]?localStorage[e]:null}getJson(e){var t=this.getData(e);return null===t?null:JSON.parse(t)}}class m{_name="Jukebox";_source={};_channels=[];_volume=0;_totalChannels=1;constructor(e,t,s){this._source=e,this._volume=s||0,this._totalChannels=t||1,void 0!==e&&this.createChannels(this._totalChannels)}setSource(e){this._source=e,this.createChannels(this._totalChannels)}createChannels(e){this._channels=[];for(var t=0;t<e;t++){var s=new Audio;s.src=this._source.audio.src,s.volume=this._volume,this._channels.push(s)}}pause(){for(var e=0;e<this._channels.length;e++)this._channels[e].pause()}play(){for(var e=0;e<this._channels.length;e++)if(this._channels[e].paused){this._channels[e].play();break}}volume(e){if(void 0===e)return this._volume;for(var t=0;t<this._channels.length;t++)this._channels[t].volume=e;this._volume=e}}class f{_name="Scene";_sceneObjects=[];_sceneManager=null;constructor(e,t){this._name=e,this._sceneObjects=t}deactivate(){for(var e=0;e<this._sceneObjects.length;this._sceneObjects[e++].destroy());this._deactivationCallback()}activate(){for(var e=0;e<this._sceneObjects.length;this._sceneManager._gfwk.createObject(this._sceneObjects[e++]));this._activationCallback(this)}_activationCallback(e){}_deactivationCallback(){}}class C{_name="ScenesManager";_activeScene=void 0;scenes=[];constructor(){}create(e,t){const s=new f(e,t);s._activationCallback=this._onSceneActivated.bind(this),s._deactivationCallback=this._onSceneDeactivated.bind(this),s._sceneManager=this,this.scenes[e]=s}_onSceneActivated(e){this._activeScene=e}_onSceneDeactivated(){this._activeScene=void 0}}class p extends o{_managedObjects={};_totalObjects=0;constructor(e,t){super(e,null,null,null,null,0,!0),this._blueprint=t}length(){let e=0;for(let t in this._managedObjects)this._managedObjects.hasOwnProperty(t)&&e++;return e}getClonedAt(e){let t=0;for(var s in this._managedObjects)if(this._managedObjects.hasOwnProperty(s)&&(t++,t===e))return this._managedObjects[s]}eachCloned(e){let t={cancel:!1};for(let s in this._managedObjects)if(this._managedObjects.hasOwnProperty(s)&&(e(this._managedObjects[s],t),t.cancel))break}clearAll(){for(let e in this._managedObjects)this._managedObjects[e].destroy();this._managedObjects={},this._totalObjects=0}cloneObject(e){const t=this;let s=Object.create(this._blueprint);return this._totalObjects++,s._containerElementPosition=this._totalObjects,s.destroy=function(){delete t._managedObjects[s._containerElementPosition]},null!=s.init&&s.init(e),this._managedObjects[this._totalObjects]=s,s}update(e){for(let t in this._managedObjects)void 0!==this._managedObjects[t].update&&this._managedObjects[t].update(e)}draw(e){for(let t in this._managedObjects)void 0!==this._managedObjects[t].draw&&this._managedObjects[t].draw(e)}}class v{_name="Container";constructor(){}static create(e,t){return new p(e,t)}}class w{_name="Fonts";constructor(){}static _getStyleSection(){const e=document.getElementsByTagName("style");if(0==e.length){const e=document.createElement("style");return e.type="text/css",e}return e[0]}static buildFont(e,t){const s=this._getStyleSection(),i=document.getElementsByTagName("head");if(0==i.length)return void console.error("No head tag was found in the DOM.");const n=`@font-face { font-family: '${e}'; src: url('${t}');}\n`;s.innerHTML=`${s.innerHTML} \n ${n}`,i[0].appendChild(s)}}class b{constructor(){}static _convolute(e,t,s){const i=Math.round(Math.sqrt(t.length)),n=Math.floor(i/2),o=e.getImageData(0,0,s.width,s.height);let a=o.data;const r=o.width,h=o.height,l=document.createElement("canvas");l.width=r,l.height=h;const c=l.getContext("2d").createImageData(r,h);let u=c.data;for(let e=0;e<h;e++)for(let s=0;s<r;s++){let o=e,h=s,l=4*(e*r+s),c=0,d=0,_=0,g=0;for(let e=0;e<i;e++)for(let s=0;s<i;s++){let r=o+e-n,l=h+s-n;if(r>=0&&r<sh&&l>=0&&l<sw){let n=4*(r*sw+l),o=t[e*i+s];c+=a[n]*o,d+=a[n+1]*o,_+=a[n+2]*o,g+=a[n+3]*o}}u[l]=c,u[l+1]=d,u[l+2]=_,u[l+3]=g+0*(255-g)}e.putImageData(c,0,0)}static _convolute2(e,t,s,i,n){n||(n=t.reduce((function(e,t){return e+t}))||1);const o=e.getImageData(0,0,s.width,s.height);let a=o.data;const r=o.width,h=o.height,l=document.createElement("canvas");l.width=r,l.height=h;const c=l.getContext("2d").createImageData(r,h);let u=c.data,d=u.length,_=0;for(let e=0;e<d;e++){if((e+1)%4==0){u[e]=a[e];continue}_=0;let s=[a[e-4*r-4]||a[e],a[e-4*r]||a[e],a[e-4*r+4]||a[e],a[e-4]||a[e],a[e],a[e+4]||a[e],a[e+4*r-4]||a[e],a[e+4*r]||a[e],a[e+4*r+4]||a[e]];for(let e=0;e<9;e++)_+=s[e]*t[e];_/=n,i&&(_+=i),u[e]=_}e.putImageData(c,0,0)}static GRAYSCALE(e,t){const s=e.getImageData(0,0,t.width,t.height);let i=s.data;for(let e=0;e<i.length;e+=4){const t=.34*i[e]+.5*i[e+1]+.16*i[e+2];i[e]=t,i[e+1]=t,i[e+2]=t}e.putImageData(s,0,0)}static INVERTCOLOR(e,t){const s=e.getImageData(0,0,t.width,t.height);let i=s.data;for(let e=0;e<i.length;e+=4)i[e]=255-i[e],i[e+1]=255-i[e+1],i[e+2]=255-i[e+2];e.putImageData(s,0,0)}static DARKER(e,t){const s=e.getImageData(0,0,t.width,t.height);let i=s.data;for(let e=0;e<i.length;e+=4)i[e]=i[e]-50<0?0:i[e]-50,i[e+1]=i[e+1]-50<0?0:i[e+1]-50,i[e+2]=i[e+2]-50<0?0:i[e+2]-50;e.putImageData(s,0,0)}static BLUR(e,t){b._convolute(e,[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],t)}static SHARPEN(e,t){b._convolute2(e,[0,-2,0,-2,11,-2,0,-2,0],t)}static EMBOSSSUBTLE(e,t){b._convolute2(e,[1,1,-1,1,3,-1,1,-1,-1],t)}static EMBOSS(e,t){b._convolute2(e,[2,0,0,0,-1,0,0,0,-1],t,127)}static EDGEDETECT(e,t){b._convolute2(e,[1,1,1,1,-7,1,1,1,1],t)}static EDGEDETECT2(e,t){b._convolute2(e,[-5,0,0,0,0,0,0,0,5],t)}}class O{_name="ImageManipulation";constructor(){}static merge(e,t,s){const i=document.createElement("canvas");i.width=s.width,i.height=s.height;const n=i.getContext("2d");void 0!==s.backgroundColor&&(n.fillStyle=s.backgroundColor,n.fillRect(0,0,s.width,s.height)),n.drawImage(t.image,t.crop.x,t.crop.y,t.crop.width,t.crop.height,t.target.x,t.target.y,t.target.width,t.target.height),n.drawImage(e.image,e.crop.x,e.crop.y,e.crop.width,e.crop.height,e.target.x,e.target.y,e.target.width,e.target.height),void 0!==s.filter&&s.filter(n,s);const o=new Image;return o.src=i.toDataURL(),o}}return t})()}));